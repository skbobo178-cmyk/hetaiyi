<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üïê Timestamp Converter</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #1a1a2e; color: #eee; min-height: 100vh; padding: 20px; }
        .container { max-width: 700px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 10px; }
        .subtitle { text-align: center; color: #888; margin-bottom: 30px; }
        .card { background: #16213e; border-radius: 12px; padding: 20px; margin-bottom: 20px; }
        .row { display: flex; gap: 15px; margin-bottom: 15px; align-items: center; }
        input, select { flex: 1; background: #0f0f23; border: 1px solid #333; color: #fff; padding: 12px; border-radius: 8px; font-size: 14px; }
        input[type="number"] { flex: 0.3; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #aaa; }
        button { background: #e94560; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; transition: transform 0.1s; }
        button:hover { transform: scale(1.02); }
        .btn-row { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 15px; }
        .btn-secondary { background: #4a4a6a; }
        .result { background: #0f0f23; padding: 15px; border-radius: 8px; margin-top: 15px; font-family: monospace; font-size: 14px; }
        .result div { padding: 8px 0; border-bottom: 1px solid #333; }
        .result div:last-child { border-bottom: none; }
        .result-label { color: #888; display: inline-block; width: 140px; }
        .result-value { color: #4ade80; cursor: pointer; }
        .result-value:hover { color: #fff; }
        .time-now { font-size: 12px; padding: 8px 14px; background: #4a4a6a; }
        .info { font-size: 13px; color: #666; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üïê Timestamp Converter</h1>
        <p class="subtitle">Convert between Unix timestamps and human dates</p>
        
        <div class="card">
            <label>Unix Timestamp (seconds or milliseconds):</label>
            <div class="row">
                <input type="text" id="timestamp" placeholder="1704067200">
                <button class="time-now" onclick="useNow()">Now</button>
            </div>
            <div class="btn-row">
                <button onclick="fromTimestamp()">üìÖ To Human Date</button>
            </div>
        </div>
        
        <div class="card">
            <label>Or select a date:</label>
            <div class="row">
                <input type="date" id="dateInput">
                <input type="time" id="timeInput">
            </div>
            <div class="btn-row">
                <button onclick="toTimestamp()">üî¢ To Timestamp</button>
            </div>
        </div>
        
        <div class="card" id="resultCard" style="display:none;">
            <label>Result:</label>
            <div class="result" id="output"></div>
            <p class="info">Click any value to copy</p>
        </div>
        
        <div class="card">
            <label>Quick Reference (Current Time):</label>
            <div class="result" id="nowResult"></div>
        </div>
    </div>

    <script>
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text);
            showToast('Copied: ' + text);
        }

        function showToast(msg) {
            const existing = document.querySelector('.toast');
            if (existing) existing.remove();
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.style.cssText = 'position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#4ade80;color:#000;padding:12px 24px;border-radius:8px;font-weight:600;z-index:1000;';
            toast.textContent = msg;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 2000);
        }

        function fromTimestamp() {
            const input = document.getElementById('timestamp').value.trim();
            if (!input) return alert('Please enter a timestamp');

            let ts = parseInt(input);
            if (isNaN(ts)) return alert('Invalid number');

            // Detect if milliseconds (13 digits) or seconds (10 digits)
            if (ts > 9999999999) ts = Math.floor(ts / 1000);

            const date = new Date(ts * 1000);
            if (isNaN(date.getTime())) return alert('Invalid date');

            displayResult(date, ts);
        }

        function toTimestamp() {
            const dateInput = document.getElementById('dateInput').value;
            const timeInput = document.getElementById('timeInput').value || '00:00';
            
            if (!dateInput) return alert('Please select a date');

            const [year, month, day] = dateInput.split('-').map(Number);
            const [hour, minute] = timeInput.split(':').map(Number);
            
            const date = new Date(year, month - 1, day, hour, minute);
            const ts = Math.floor(date.getTime() / 1000);

            displayResult(date, ts);
        }

        function displayResult(date, ts) {
            const local = date.toLocaleString('zh-TW', { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
            const utc = date.toUTCString();
            const iso = date.toISOString();
            const relative = getRelativeTime(date);

            const html = `
                <div><span class="result-label">Unix (seconds):</span> <span class="result-value" onclick="copyToClipboard('${ts}')">${ts}</span></div>
                <div><span class="result-label">Unix (ms):</span> <span class="result-value" onclick="copyToClipboard('${ts * 1000}')">${ts * 1000}</span></div>
                <div><span class="result-label">Local:</span> <span class="result-value" onclick="copyToClipboard('${local}')">${local}</span></div>
                <div><span class="result-label">UTC:</span> <span class="result-value" onclick="copyToClipboard('${utc}')">${utc}</span></div>
                <div><span class="result-label">ISO:</span> <span class="result-value" onclick="copyToClipboard('${iso}')">${iso}</span></div>
                <div><span class="result-label">Relative:</span> ${relative}</div>
            `;
            
            document.getElementById('output').innerHTML = html;
            document.getElementById('resultCard').style.display = 'block';
        }

        function useNow() {
            const now = Math.floor(Date.now() / 1000);
            document.getElementById('timestamp').value = now;
            fromTimestamp();
        }

        function getRelativeTime(date) {
            const now = new Date();
            const diff = now - date;
            const absDiff = Math.abs(diff);
            const suffix = diff > 0 ? 'ago' : 'from now';

            if (absDiff < 60000) return 'Just now';
            if (absDiff < 3600000) return Math.floor(absDiff / 60000) + ' minutes ' + suffix;
            if (absDiff < 86400000) return Math.floor(absDiff / 3600000) + ' hours ' + suffix;
            return Math.floor(absDiff / 86400000) + ' days ' + suffix;
        }

        // Show current time on load
        function updateNow() {
            const now = new Date();
            const ts = Math.floor(now.getTime() / 1000);
            document.getElementById('nowResult').innerHTML = `
                <div><span class="result-label">Now:</span> <span class="result-value" onclick="copyToClipboard('${ts}')">${ts}</span></div>
                <div><span class="result-label">Local:</span> ${now.toLocaleString('zh-TW', { hour12: false })}</div>
                <div><span class="result-label">UTC:</span> ${now.toUTCString()}</div>
            `;
        }
        
        updateNow();
        setInterval(updateNow, 1000);
    </script>
</body>
</html>

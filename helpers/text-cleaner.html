<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìù Text Cleaner & Formatter</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #1a1a2e; color: #eee; min-height: 100vh; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 10px; }
        .subtitle { text-align: center; color: #888; margin-bottom: 30px; }
        .card { background: #16213e; border-radius: 12px; padding: 20px; margin-bottom: 20px; }
        textarea { width: 100%; background: #0f0f23; border: 1px solid #333; color: #fff; padding: 12px; border-radius: 8px; font-size: 14px; min-height: 120px; resize: vertical; font-family: inherit; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #aaa; }
        .btn-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 10px; margin: 15px 0; }
        button { background: #e94560; color: white; border: none; padding: 10px 16px; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; transition: transform 0.1s; }
        button:hover { transform: scale(1.02); }
        button:active { transform: scale(0.98); }
        .btn-secondary { background: #4a4a6a; }
        .result { background: #0f0f23; padding: 15px; border-radius: 8px; margin-top: 15px; white-space: pre-wrap; word-break: break-word; max-height: 300px; overflow-y: auto; font-size: 14px; }
        .options { display: flex; flex-wrap: wrap; gap: 15px; margin: 15px 0; }
        .options label { display: flex; align-items: center; gap: 6px; font-weight: normal; cursor: pointer; }
        .stats { font-size: 13px; color: #888; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìù Text Cleaner</h1>
        <p class="subtitle">Clean, format, and transform your text instantly</p>
        
        <div class="card">
            <label>Input Text:</label>
            <textarea id="input" placeholder="Paste your text here..."></textarea>
        </div>
        
        <div class="card">
            <label>Transformations:</label>
            <div class="btn-grid">
                <button onclick="cleanText()">üßπ Clean Whitespace</button>
                <button onclick="removeEmptyLines()">‚úÇÔ∏è Remove Empty Lines</button>
                <button onclick="toSingleLine()">‚ÜîÔ∏è Single Line</button>
                <button onclick="toTitleCase()">Aa Title Case</button>
                <button onclick="toUpperCase()">AA UPPERCASE</button>
                <button onclick="toLowerCase()">aa lowercase</button>
                <button onclick="reverseText()">üîÑ Reverse</button>
                <button onclick="sortLines()">Sort A-Z</button>
                <button onclick="removeDuplicates()">üö´ Remove Duplicates</button>
                <button onclick="trimLines()">‚úèÔ∏è Trim Each Line</button>
                <button onclick="addLineNumbers()"># Line Numbers</button>
                <button onclick="escapeHtml()">&lt;HTML Escape&gt;</button>
                <button onclick="unescapeHtml()">&gt;HTML Unescape</button>
                <button onclick="base64Encode()">üîí Base64 Encode</button>
                <button onclick="base64Decode()">üîì Base64 Decode</button>
            </div>
            <div class="btn-grid">
                <button class="btn-secondary" onclick="copyResult()">üìã Copy Result</button>
                <button class="btn-secondary" onclick="swapText()">‚áÖ Swap Input/Output</button>
                <button class="btn-secondary" onclick="clearAll()">üóëÔ∏è Clear All</button>
            </div>
        </div>
        
        <div class="card">
            <label>Result:</label>
            <div class="result" id="output"></div>
            <div class="stats" id="stats"></div>
        </div>
    </div>

    <script>
        let lastResult = '';

        function getText() {
            return document.getElementById('input').value;
        }

        function setOutput(text) {
            lastResult = text;
            document.getElementById('output').textContent = text;
            updateStats(text);
        }

        function updateStats(text) {
            const lines = text ? text.split('\n').length : 0;
            const chars = text.length;
            const words = text ? text.trim().split(/\s+/).filter(w => w).length : 0;
            document.getElementById('stats').textContent = `${lines} lines | ${words} words | ${chars} characters`;
        }

        function cleanText() {
            let text = getText();
            text = text.replace(/[ \t]+/g, ' '); // Multiple spaces to single
            text = text.replace(/[\r\n]+/g, '\n'); // Multiple newlines to single
            setOutput(text.trim());
        }

        function removeEmptyLines() {
            let text = getText();
            text = text.split('\n').filter(line => line.trim()).join('\n');
            setOutput(text);
        }

        function toSingleLine() {
            let text = getText();
            text = text.replace(/[\n\t ]+/g, ' ').trim();
            setOutput(text);
        }

        function toTitleCase() {
            let text = getText();
            text = text.replace(/\b\w+/g, word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase());
            setOutput(text);
        }

        function toUpperCase() {
            setOutput(getText().toUpperCase());
        }

        function toLowerCase() {
            setOutput(getText().toLowerCase());
        }

        function reverseText() {
            let text = getText();
            text = text.split('').reverse().join('');
            setOutput(text);
        }

        function sortLines() {
            let text = getText();
            text = text.split('\n').sort((a, b) => a.localeCompare(b)).join('\n');
            setOutput(text);
        }

        function removeDuplicates() {
            let text = getText();
            const lines = text.split('\n');
            const seen = new Set();
            const unique = lines.filter(line => {
                const trimmed = line.trim();
                if (seen.has(trimmed)) return false;
                seen.add(trimmed);
                return true;
            });
            setOutput(unique.join('\n'));
        }

        function trimLines() {
            let text = getText();
            text = text.split('\n').map(line => line.trim()).join('\n');
            setOutput(text);
        }

        function addLineNumbers() {
            let text = getText();
            const lines = text.split('\n');
            const padded = lines.map((line, i) => `${(i + 1).toString().padStart(3, ' ')} | ${line}`);
            setOutput(padded.join('\n'));
        }

        function escapeHtml() {
            let text = getText();
            text = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
            setOutput(text);
        }

        function unescapeHtml() {
            let text = getText();
            text = text.replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '"').replace(/&amp;/g, '&');
            setOutput(text);
        }

        function base64Encode() {
            try {
                setOutput(btoa(unescape(encodeURIComponent(getText()))));
            } catch (e) {
                setOutput('Error: Invalid input for Base64 encoding');
            }
        }

        function base64Decode() {
            try {
                setOutput(decodeURIComponent(escape(atob(getText()))));
            } catch (e) {
                setOutput('Error: Invalid Base64 string');
            }
        }

        function copyResult() {
            if (lastResult) {
                navigator.clipboard.writeText(lastResult);
                alert('Copied!');
            }
        }

        function swapText() {
            const current = getText();
            document.getElementById('input').value = lastResult;
            document.getElementById('output').textContent = current;
            lastResult = current;
            updateStats(current);
        }

        function clearAll() {
            document.getElementById('input').value = '';
            document.getElementById('output').textContent = '';
            document.getElementById('stats').textContent = '';
            lastResult = '';
        }
    </script>
</body>
</html>
